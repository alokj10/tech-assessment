{"version":3,"sources":["../../../src/Controllers/admin/McqController.js"],"names":["McqController","GetAll","req","resp","console","log","user","model","McqModel","then","res","status","send","catch","error","msg","Add","body","mcq_meta","createdBy","id","createdOn","Date","toLocaleDateString","JSON","stringify","BulkMcq","bulkMcqToAdd","addedBy","emailId","BulkAddMcq","Update","Delete","BulkDelete","mcqIdsToDelete","DeleteByIds","BaseController"],"mappings":"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","file":"McqController.js","sourcesContent":["import db from '../../db';\r\nimport auth from '../../utils/auth';\r\nimport users from '../../users';\r\nimport McqModel from '../../Models/McqModel';\r\nimport BaseController from '../BaseController';\r\n\r\nclass McqController extends BaseController {\r\n\r\n    GetAll = (req, resp) => {\r\n        console.log('get all mcqs called', req.user);\r\n        // let mcqs = this.initializeCollection();\r\n        // if(req.user && req.user.role === users.UserRoles.admin) {\r\n        //     console.log(mcqs.data.length);\r\n        //     return resp.status(200).send(mcqs.data);\r\n        // }\r\n        // else {\r\n        //     this.GetMcqsByRecruiter(req, resp);\r\n        // }\r\n        let model = new McqModel();\r\n        model.GetAll(req.user)\r\n            .then((res) => {\r\n                console.log('mcq retrieved');\r\n                resp.status(200).send(res);\r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in fetch MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            })\r\n    }\r\n    \r\n    // GetMcqsByRecruiter = (req, resp) => {\r\n    //     console.log('get all mcqs by recruiter called', req.user);\r\n    //     let mcqs = this.initializeCollection();\r\n    //     if(mcqs.data && mcqs.data.length > 0 && req.user) {\r\n    //         let filteredMcqs = mcqs.data.filter((item, index) => {\r\n    //             return item.addedBy = req.user.emailId;\r\n    //         });\r\n    //         console.log(filteredMcqs.length);\r\n    //         return resp.status(200).send(filteredMcqs);\r\n    //     }\r\n    //     resp.status(200).send(mcqs.data);\r\n    // }\r\n\r\n    Add = (req, resp) => {\r\n        console.log('Add Mcq called');\r\n        console.log(req.body);\r\n        // let mcqs = this.initializeCollection();\r\n        let { mcq_meta } = req.body;\r\n        let model = new McqModel();\r\n        mcq_meta.createdBy = req.user.id;\r\n        mcq_meta.createdOn = (new Date()).toLocaleDateString();\r\n\r\n        model.Add(mcq_meta)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Added');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in add MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n    BulkMcq = (req, resp) => {\r\n        console.log('Bulk Mcq called');\r\n        console.log(req.body);\r\n        let bulkMcqToAdd = req.body;\r\n        if(req.user) {\r\n            bulkMcqToAdd.addedBy = req.user.emailId;\r\n        }\r\n        let model = new McqModel(); \r\n        model.BulkAddMcq(bulkMcqToAdd)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('Bulk MCQ Added');\r\n                    resp.status(200).send(\"Success\");\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in Bulk add MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n    Update = (req, resp) => {\r\n        console.log('update mcq called');\r\n        console.log(req.body);\r\n        let model = new McqModel(); \r\n        model.Update(req.body)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Updated');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in update MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n\r\n    }\r\n\r\n    Delete = (req, resp) => {\r\n        console.log('delete mcq called');\r\n        console.log(req.body);\r\n        let model = new McqModel();\r\n        model.Delete(req.body)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Deleted');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in delete MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n    \r\n    BulkDelete = (req, resp) => {\r\n        console.log('bulk delete mcq called');\r\n        console.log(req.body);\r\n        let model = new McqModel();\r\n        let { mcqIdsToDelete } = req.body; \r\n        model.DeleteByIds(mcqIdsToDelete)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('Bulk MCQ Deleted');\r\n                    resp.status(200).send('success');\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in delete MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n}\r\n\r\nexport default new McqController();"]}