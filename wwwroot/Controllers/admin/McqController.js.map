{"version":3,"sources":["../../../src/Controllers/admin/McqController.js"],"names":["McqController","GetAll","req","resp","console","log","user","model","McqModel","then","res","status","send","catch","error","msg","Add","body","mcqToAdd","addedBy","emailId","JSON","stringify","BulkMcq","bulkMcqToAdd","BulkAddMcq","Update","Delete"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEMA,a;AACF;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AAlJA,yBAAc;AACV;;AADU;;AAAA,SAIdC,MAJc,GAIL,UAACC,GAAD,EAAMC,IAAN,EAAe;AACpBC,gBAAQC,GAAR,CAAY,qBAAZ,EAAmCH,IAAII,IAAvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAIC,QAAQ,IAAIC,kBAAJ,EAAZ;AACAD,cAAMN,MAAN,CAAaC,IAAII,IAAjB,EACKG,IADL,CACU,UAACC,GAAD,EAAS;AACX,gBAAGA,GAAH,EAAQ;AACJP,qBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBF,GAAtB;AACH;AACJ,SALL,EAMKG,KANL,CAMW,UAACC,KAAD,EAAW;AACd,gBAAIC,MAAM,yBAAyBD,KAAnC;AACAV,oBAAQC,GAAR,CAAYU,GAAZ;AACAZ,iBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBG,GAAtB;AACH,SAVL;AAWH,KA1Ba;;AAAA,SAyCdC,GAzCc,GAyCR,UAACd,GAAD,EAAMC,IAAN,EAAe;AACjBC,gBAAQC,GAAR,CAAY,gBAAZ;AACAD,gBAAQC,GAAR,CAAYH,IAAIe,IAAhB;AACA;AACA,YAAIC,WAAWhB,IAAIe,IAAnB;AACA,YAAGf,IAAII,IAAP,EAAa;AACTY,qBAASC,OAAT,GAAmBjB,IAAII,IAAJ,CAASc,OAA5B;AACH;AACD,YAAIb,QAAQ,IAAIC,kBAAJ,EAAZ;AACAD,cAAMS,GAAN,CAAUE,QAAV,EACKT,IADL,CACU,UAACC,GAAD,EAAS;AACX,gBAAGA,GAAH,EAAQ;AACJN,wBAAQC,GAAR,CAAY,WAAZ;AACAF,qBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBS,KAAKC,SAAL,CAAepB,IAAIe,IAAnB,CAAtB;AACH;AACJ,SANL,EAOKJ,KAPL,CAOW,UAACC,KAAD,EAAW;AACd,gBAAIC,MAAM,uBAAuBD,KAAjC;AACAV,oBAAQC,GAAR,CAAYU,GAAZ;AACAZ,iBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBG,GAAtB;AACH,SAXL;AAYA;AACA;AACA;AACH,KAjEa;;AAAA,SAmEdQ,OAnEc,GAmEJ,UAACrB,GAAD,EAAMC,IAAN,EAAe;AACrBC,gBAAQC,GAAR,CAAY,iBAAZ;AACAD,gBAAQC,GAAR,CAAYH,IAAIe,IAAhB;AACA,YAAIO,eAAetB,IAAIe,IAAvB;AACA,YAAGf,IAAII,IAAP,EAAa;AACTkB,yBAAaL,OAAb,GAAuBjB,IAAII,IAAJ,CAASc,OAAhC;AACH;AACD,YAAIb,QAAQ,IAAIC,kBAAJ,EAAZ;AACAD,cAAMkB,UAAN,CAAiBD,YAAjB,EACKf,IADL,CACU,UAACC,GAAD,EAAS;AACX,gBAAGA,GAAH,EAAQ;AACJN,wBAAQC,GAAR,CAAY,gBAAZ;AACAF,qBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsB,SAAtB;AACH;AACJ,SANL,EAOKC,KAPL,CAOW,UAACC,KAAD,EAAW;AACd,gBAAIC,MAAM,4BAA4BD,KAAtC;AACAV,oBAAQC,GAAR,CAAYU,GAAZ;AACAZ,iBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBG,GAAtB;AACH,SAXL;AAYH,KAvFa;;AAAA,SAyFdW,MAzFc,GAyFL,UAACxB,GAAD,EAAMC,IAAN,EAAe;AACpBC,gBAAQC,GAAR,CAAY,mBAAZ;AACAD,gBAAQC,GAAR,CAAYH,IAAIe,IAAhB;AACA,YAAIV,QAAQ,IAAIC,kBAAJ,EAAZ;AACAD,cAAMmB,MAAN,CAAaxB,IAAIe,IAAjB,EACKR,IADL,CACU,UAACC,GAAD,EAAS;AACX,gBAAGA,GAAH,EAAQ;AACJN,wBAAQC,GAAR,CAAY,aAAZ;AACAF,qBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBS,KAAKC,SAAL,CAAepB,IAAIe,IAAnB,CAAtB;AACH;AACJ,SANL,EAOKJ,KAPL,CAOW,UAACC,KAAD,EAAW;AACd,gBAAIC,MAAM,0BAA0BD,KAApC;AACAV,oBAAQC,GAAR,CAAYU,GAAZ;AACAZ,iBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBG,GAAtB;AACH,SAXL;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAxHa;;AAAA,SA0HdY,MA1Hc,GA0HL,UAACzB,GAAD,EAAMC,IAAN,EAAe;AACpBC,gBAAQC,GAAR,CAAY,mBAAZ;;AAEA,YAAIE,QAAQ,IAAIC,kBAAJ,EAAZ;AACAD,cAAMoB,MAAN,CAAazB,IAAIe,IAAjB,EACKR,IADL,CACU,UAACC,GAAD,EAAS;AACX,gBAAGA,GAAH,EAAQ;AACJN,wBAAQC,GAAR,CAAY,aAAZ;AACAF,qBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBS,KAAKC,SAAL,CAAepB,IAAIe,IAAnB,CAAtB;AACH;AACJ,SANL,EAOKJ,KAPL,CAOW,UAACC,KAAD,EAAW;AACd,gBAAIC,MAAM,0BAA0BD,KAApC;AACAV,oBAAQC,GAAR,CAAYU,GAAZ;AACAZ,iBAAKQ,MAAL,CAAY,GAAZ,EAAiBC,IAAjB,CAAsBG,GAAtB;AACH,SAXL;AAYH,KA1Ia;AAEb;;AA0BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;kBA8GW,IAAIf,aAAJ,E","file":"McqController.js","sourcesContent":["import db from '../../db';\r\nimport auth from '../../utils/auth';\r\nimport users from '../../users';\r\nimport McqModel from '../../McqModel';\r\n\r\nclass McqController {\r\n    //Model = {};\r\n    constructor() {\r\n        //this.Model = new McqModel();\r\n    }\r\n\r\n    GetAll = (req, resp) => {\r\n        console.log('get all mcqs called', req.user);\r\n        // let mcqs = this.initializeCollection();\r\n        // if(req.user && req.user.role === users.UserRoles.admin) {\r\n        //     console.log(mcqs.data.length);\r\n        //     return resp.status(200).send(mcqs.data);\r\n        // }\r\n        // else {\r\n        //     this.GetMcqsByRecruiter(req, resp);\r\n        // }\r\n        let model = new McqModel();\r\n        model.GetAll(req.user)\r\n            .then((res) => {\r\n                if(res) {\r\n                    resp.status(200).send(res);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in fetch MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            })\r\n    }\r\n    \r\n    // GetMcqsByRecruiter = (req, resp) => {\r\n    //     console.log('get all mcqs by recruiter called', req.user);\r\n    //     let mcqs = this.initializeCollection();\r\n    //     if(mcqs.data && mcqs.data.length > 0 && req.user) {\r\n    //         let filteredMcqs = mcqs.data.filter((item, index) => {\r\n    //             return item.addedBy = req.user.emailId;\r\n    //         });\r\n    //         console.log(filteredMcqs.length);\r\n    //         return resp.status(200).send(filteredMcqs);\r\n    //     }\r\n    //     resp.status(200).send(mcqs.data);\r\n    // }\r\n\r\n    Add = (req, resp) => {\r\n        console.log('Add Mcq called');\r\n        console.log(req.body);\r\n        // let mcqs = this.initializeCollection();\r\n        let mcqToAdd = req.body;\r\n        if(req.user) {\r\n            mcqToAdd.addedBy = req.user.emailId;\r\n        }\r\n        let model = new McqModel(); \r\n        model.Add(mcqToAdd)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Added');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in add MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n        // mcqs.insert(mcqToAdd);\r\n        // db.saveDatabase();\r\n        // resp.send(JSON.stringify(req.body));\r\n    }\r\n\r\n    BulkMcq = (req, resp) => {\r\n        console.log('Bulk Mcq called');\r\n        console.log(req.body);\r\n        let bulkMcqToAdd = req.body;\r\n        if(req.user) {\r\n            bulkMcqToAdd.addedBy = req.user.emailId;\r\n        }\r\n        let model = new McqModel(); \r\n        model.BulkAddMcq(bulkMcqToAdd)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('Bulk MCQ Added');\r\n                    resp.status(200).send(\"Success\");\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in Bulk add MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n    Update = (req, resp) => {\r\n        console.log('update mcq called');\r\n        console.log(req.body);\r\n        let model = new McqModel(); \r\n        model.Update(req.body)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Updated');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in update MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n        // let mcqs = this.initializeCollection();\r\n        // let mcqToUpdate = mcqs.find({ '$loki': req.body.$loki });\r\n        // if(mcqToUpdate && mcqToUpdate.length > 0) {\r\n        //     mcqToUpdate[0].title = req.body.title;\r\n        //     mcqToUpdate[0].description = req.body.description;\r\n        //     if(req.user) {\r\n        //         mcqToUpdate[0].updatedBy = req.user.emailId;\r\n        //     }\r\n        //     mcqs.update(mcqToUpdate[0]);\r\n        // }\r\n        // else {\r\n        //     console.log('nothing to update');\r\n        // }\r\n        // console.log(mcqToUpdate);\r\n        // resp.send(JSON.stringify(req.body));\r\n    }\r\n\r\n    Delete = (req, resp) => {\r\n        console.log('delete mcq called');\r\n        \r\n        let model = new McqModel(); \r\n        model.Delete(req.body)\r\n            .then((res) => {\r\n                if(res) {\r\n                    console.log('MCQ Deleted');\r\n                    resp.status(200).send(JSON.stringify(req.body));\r\n                }  \r\n            })\r\n            .catch((error) => {\r\n                let msg = \"Error in delete MCQ: \" + error;\r\n                console.log(msg);\r\n                resp.status(500).send(msg);\r\n            });\r\n    }\r\n\r\n    // initializeCollection = () => {\r\n    //     let mcqs = db.getCollection('mcqs');\r\n    //     if(!mcqs) {\r\n    //         mcqs = db.addCollection('mcqs');\r\n    //     }\r\n    //     return mcqs;\r\n    // }\r\n}\r\n\r\nexport default new McqController();"]}