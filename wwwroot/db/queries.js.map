{"version":3,"sources":["../../src/db/queries.js"],"names":["queries","getAllInvitationsQuery","getCandidatesByTestId","testId","getInvitationCountForAdmin","getInvitationCountForUser","userId","getInvitationCountByOrgId","orgId","getInvitationsByOrgQuery","getInvitationsByCreateUserQuery","getTestCountForAdmin","getTestCountByOrgId","getTestCountByUser","getMcqCountForAdmin","getMcqCountByUser","getMcqCountByOrgId","getCandidateInfoByInvitationId","invitationId","getCandidateByEmailQuery","emailId","getUserByEmailIdQuery","getMcqResponseByInvitationId","getMcqResponseByResponseId","responseId","getAllDbConfig","getDbConfigByKey","key","getCandidateDetails","candidateId","getAllRegistrationsQuery"],"mappings":";;;;;;;;AAAA,IAAMA;AACFC,4BAAwB,kCAAM;AAC1B;AAsBH,KAxBC;;AA0BFC,2BAAuB,+BAACC,MAAD,EAAY;AAC/B,0rCAiBiBA,MAjBjB;AAoBH,KA/CC;;AAiDFC,gCAA4B,sCAAM;AAC9B;AAOH,KAzDC;;AA2DFC,+BAA2B,mCAACC,MAAD,EAAY;AACnC,kgBAOuBA,MAPvB;AASH,KArEC;;AAuEFC,+BAA2B,mCAACC,KAAD,EAAW;AAClC,kiBAOuDA,KAPvD;AASH,KAjFC;;AAmFFC,8BAA0B,kCAACD,KAAD,EAAW;AACjC,iwCAeuDA,KAfvD;AAkBH,KAtGC;;AAwGFE,qCAAiC,yCAACJ,MAAD,EAAY;AACzC,2xCAiBuBA,MAjBvB;AAoBH,KA7HC;;AA+HFK,0BAAsB,gCAAM;AACxB;AAIH,KApIC;;AAsIFC,yBAAqB,6BAACJ,KAAD,EAAW;AAC5B,iPAIuDA,KAJvD;AAMH,KA7IC;;AA+IFK,wBAAoB,4BAACP,MAAD,EAAY;AAC5B,iNAIuBA,MAJvB;AAMH,KAtJC;;AAwJFQ,yBAAqB,+BAAM;AACvB;AAIH,KA7JC;;AA+JFC,uBAAmB,2BAACT,MAAD,EAAY;AAC3B,8LAImBA,MAJnB;AAMH,KAtKC;;AAwKFU,wBAAoB,4BAACR,KAAD,EAAW;AAC3B,8NAImDA,KAJnD;AAMH,KA/KC;;AAiLFS,oCAAgC,wCAACC,YAAD,EAAkB;AAClD,6aAOuBA,YAPvB;AASC,KA3LC;;AA6LFC,8BAA0B,kCAACC,OAAD,EAAa;AACnC,6IAGyDA,OAHzD;AAKH,KAnMC;;AAqMFC,2BAAuB,+BAACD,OAAD,EAAa;AAChC,8MAIsDA,OAJtD;AAMH,KA5MC;;AA8MFE,kCAA8B,sCAACJ,YAAD,EAAkB;AAC5C,gNAI8DA,YAJ9D;AAMH,KArNC;;AAuNFK,gCAA4B,oCAACC,UAAD,EAAgB;AACxC,4RAOmBA,UAPnB;AASH,KAjOC;;AAmOFC,oBAAgB,0BAAM;AAClB;AAIH,KAxOC;;AA0OFC,sBAAkB,0BAACC,GAAD,EAAS;AACvB,uHAGsBA,GAHtB;AAKH,KAhPC;;AAkPFC,yBAAqB,6BAACC,WAAD,EAAiB;AAClC,gcASkBA,WATlB;AAYH,KA/PC;;AAiQFC,8BAA0B,oCAAM;AAC5B;AAGH;;AArQC,+BAuQwB,kCAACtB,KAAD,EAAW;AACjC;AAGH,CA3QC,CAAN;kBA6QeR,O","file":"queries.js","sourcesContent":["const queries =  {\r\n    getAllInvitationsQuery: () => {\r\n        return `\r\n                SELECT \r\n                /*JSON_UNQUOTE(JSON_EXTRACT(r.response_meta , invitationId)) as 'respInvitationId', r.**/\r\n                JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.name')) as 'candidateName', \r\n                JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.email')) as 'candidateEmail', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.status')) as 'invitationStatus', \r\n                i.time_stamp as 'invitedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.completedOn')) as 'completedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.scorePercentage')) as 'scorePercentage', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.result')) as 'result', \r\n                JSON_UNQUOTE(JSON_EXTRACT(t.test_meta, '$.testName')) as 'testName', \r\n                t.id as 'testId', r.id as 'responseId', c.id as 'candidateId',\r\n                r.response_meta as 'response_meta'\r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta , '$.candidateId')) = c.id \r\n                join ta_tests t ON JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta , '$.testId')) = t.id \r\n                left join ta_mcqresponses r ON r.invitationId = i.id\r\n                /*left join ta_mcqresponses r ON JSON_UNQUOTE(JSON_EXTRACT(r.response_meta , '$.invitationId')) = i.id*/\r\n                /*where r.id in (47, 50)*/\r\n                where i.isLive=1\r\n                order by i.time_stamp DESC\r\n        `;\r\n    },\r\n\r\n    getCandidatesByTestId: (testId) => {\r\n        return `\r\n            SELECT \r\n            JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.name')) as 'candidateName', \r\n            JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.email')) as 'candidateEmail', \r\n            JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.status')) as 'invitationStatus', \r\n            i.time_stamp as 'invitedOn', \r\n            JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.completedOn')) as 'completedOn', \r\n            JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.scorePercentage')) as 'scorePercentage', \r\n            JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.result')) as 'result', \r\n            JSON_UNQUOTE(JSON_EXTRACT(t.test_meta, '$.testName')) as 'testName', \r\n            t.id as 'testId', r.id as 'responseId', c.id as 'candidateId',\r\n            r.response_meta as 'response_meta'\r\n            FROM ta_invitations i \r\n            join ta_candidates c ON JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta , '$.candidateId')) = c.id \r\n            join ta_tests t ON JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta , '$.testId')) = t.id \r\n            left join ta_mcqresponses r ON r.invitationId = i.id\r\n            where i.isLive=1\r\n            and t.id = ${testId}\r\n            order by i.time_stamp DESC\r\n        `;\r\n    },\r\n\r\n    getInvitationCountForAdmin: () => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n            `;\r\n    },\r\n\r\n    getInvitationCountForUser: (userId) => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id \r\n                join ta_users u ON JSON_EXTRACT(i.invitation_meta, '$.createdBy') = u.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n                WHERE u.id = ${userId} \r\n            `;\r\n    },\r\n\r\n    getInvitationCountByOrgId: (orgId) => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id \r\n                join ta_users u ON JSON_EXTRACT(i.invitation_meta, '$.createdBy') = u.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n                WHERE JSON_EXTRACT(u.user_meta, '$.orgId') = ${orgId}\r\n            `;\r\n    },\r\n\r\n    getInvitationsByOrgQuery: (orgId) => {\r\n        return `\r\n                SELECT JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.name')) as 'candidateName', \r\n                JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.email')) as 'candidateEmail', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.status')) as 'invitationStatus', \r\n                i.time_stamp as 'invitedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.completedOn')) as 'completedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.scorePercentage')) as 'scorePercentage', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.result')) as 'result', \r\n                JSON_UNQUOTE(JSON_EXTRACT(t.test_meta, '$.testName')) as 'testName', \r\n                t.id as 'testId', r.id as 'responseId' \r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id\r\n                join ta_users u ON JSON_EXTRACT(i.invitation_meta, '$.createdBy') = u.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n                WHERE JSON_EXTRACT(u.user_meta, '$.orgId') = ${orgId}\r\n                order by i.time_stamp DESC\r\n            `;\r\n    },\r\n\r\n    getInvitationsByCreateUserQuery: (userId) => {\r\n        return `\r\n                SELECT \r\n                c.id as 'candidateId',\r\n                JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.name')) as 'candidateName', \r\n                JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.email')) as 'candidateEmail', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.status')) as 'invitationStatus', \r\n                i.time_stamp as 'invitedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(i.invitation_meta, '$.completedOn')) as 'completedOn', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.scorePercentage')) as 'scorePercentage', \r\n                JSON_UNQUOTE(JSON_EXTRACT(r.response_meta, '$.result')) as 'result', \r\n                JSON_UNQUOTE(JSON_EXTRACT(t.test_meta, '$.testName')) as 'testName', \r\n                t.id as 'testId', r.id as 'responseId' \r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id\r\n                join ta_users u ON JSON_EXTRACT(i.invitation_meta, '$.createdBy') = u.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n                WHERE u.id = ${userId}\r\n                order by i.time_stamp DESC\r\n            `;\r\n    },\r\n\r\n    getTestCountForAdmin: () => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_tests t\r\n            `;\r\n    },\r\n\r\n    getTestCountByOrgId: (orgId) => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_tests t\r\n                join ta_users u ON JSON_EXTRACT(t.test_meta, '$.createdBy') = u.id \r\n                WHERE JSON_EXTRACT(u.user_meta, '$.orgId') = ${orgId}\r\n            `;\r\n    },\r\n\r\n    getTestCountByUser: (userId) => {\r\n        return `\r\n                SELECT COUNT(*) as cnt\r\n                FROM ta_tests t\r\n                join ta_users u ON JSON_EXTRACT(t.test_meta, '$.createdBy') = u.id \r\n                WHERE u.id = ${userId}\r\n            `;\r\n    },\r\n\r\n    getMcqCountForAdmin: () => {\r\n        return `\r\n            SELECT COUNT(*) as cnt\r\n            FROM ta_mcq\r\n        `;\r\n    },\r\n\r\n    getMcqCountByUser: (userId) => {\r\n        return `\r\n            SELECT COUNT(*) as cnt\r\n            FROM ta_mcq m\r\n            join ta_users u ON JSON_EXTRACT(m.mcq_meta, '$.createdBy') = u.id \r\n            WHERE u.id = ${userId}\r\n        `;\r\n    },\r\n    \r\n    getMcqCountByOrgId: (orgId) => {\r\n        return `\r\n            SELECT COUNT(*) as cnt\r\n            FROM ta_mcq m\r\n            join ta_users u ON JSON_EXTRACT(m.mcq_meta, '$.createdBy') = u.id \r\n            WHERE JSON_EXTRACT(u.user_meta, '$.orgId') = ${orgId}\r\n        `;\r\n    },\r\n\r\n    getCandidateInfoByInvitationId: (invitationId) => {\r\n    return `\r\n            SELECT i.id AS 'invitationId',\r\n            c.id AS 'candidateId',\r\n            JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.name')) AS 'candidateName',\r\n            JSON_UNQUOTE(JSON_EXTRACT(c.candidate_meta, '$.email')) AS 'candidateEmail'\r\n            FROM ta_invitations i\r\n            JOIN ta_candidates c ON JSON_EXTRACT(i.invitation_meta,'$.candidateId')=c.id\r\n            WHERE i.id = ${invitationId}\r\n        `;\r\n    },\r\n\r\n    getCandidateByEmailQuery: (emailId) => {\r\n        return `\r\n            SELECT *\r\n            FROM ta_candidates c\r\n            WHERE JSON_EXTRACT(c.candidate_meta, '$.email') = '${emailId}'\r\n        `;\r\n    },\r\n\r\n    getUserByEmailIdQuery: (emailId) => {\r\n        return `\r\n            SELECT u.id as 'id', \r\n            JSON_EXTRACT(u.user_meta, '$') as 'user_meta'\r\n            FROM ta_users u \r\n            WHERE JSON_EXTRACT(u.user_meta, '$.emailId') = '${emailId}'\r\n        `;\r\n    },\r\n\r\n    getMcqResponseByInvitationId: (invitationId) => {\r\n        return `\r\n            SELECT r.id as 'id',\r\n            r.response_meta as 'response_meta'\r\n            FROM ta_mcqresponses r\r\n            WHERE JSON_EXTRACT(r.response_meta, '$.invitationId') = ${invitationId}\r\n        `;\r\n    },\r\n\r\n    getMcqResponseByResponseId: (responseId) => {\r\n        return `\r\n            SELECT  r.id,\r\n                    r.invitationId,\r\n                    r.response_meta,\r\n                    i.invitation_meta\r\n            FROM ta_mcqresponses r\r\n            JOIN ta_invitations i on r.invitationId = i.id\r\n            WHERE r.id = ${responseId}\r\n        `;\r\n    },\r\n\r\n    getAllDbConfig: () => {\r\n        return `\r\n            SELECT meta_key, meta_value\r\n            FROM ta_config\r\n        `;\r\n    },\r\n\r\n    getDbConfigByKey: (key) => {\r\n        return `\r\n            SELECT meta_key, meta_value\r\n            FROM ta_config\r\n            WHERE meta_key='${key}'\r\n        `;\r\n    },\r\n\r\n    getCandidateDetails: (candidateId) => {\r\n        return `\r\n            SELECT c.candidate_meta,\r\n            i.invitation_meta,\r\n            t.test_meta,\r\n            r.response_meta\r\n            FROM ta_candidates c\r\n            JOIN ta_invitations i on JSON_EXTRACT(i.invitation_meta, '$.candidateId') = c.id\r\n            JOIN ta_tests t on JSON_EXTRACT(i.invitation_meta, '$.testId') = t.id\r\n            LEFT JOIN ta_mcqresponses r on i.id = r.invitationId\r\n            WHERE c.id= ${candidateId}\r\n            AND i.isLive = 1\r\n        `;\r\n    },\r\n\r\n    getAllRegistrationsQuery: () => {\r\n        return `\r\n        \r\n        `;\r\n    },\r\n\r\n    getAllRegistrationsQuery: (orgId) => {\r\n        return `\r\n        \r\n        `;\r\n    }\r\n}\r\nexport default queries;\r\n\r\n\r\n"]}