{"version":3,"sources":["../../src/db/queries.js"],"names":["queries","getAllInvitationsQuery","getInvitationsByOrgQuery","orgId","getCandidateInfoByInvitationId","invitationId","getUserByEmailIdQuery","emailId","getMcqResponseByInvitationId","getAllDbConfig","getCandidatesByTestId","testId"],"mappings":";;;;;AAAA,IAAMA,UAAW;AACbC,4BAAwB,kCAAM;AAC9B;AAeC,KAjBY;;AAmBbC,8BAA0B,kCAACC,KAAD,EAAW;AACjC,isCAeuDA,KAfvD;AAiBH,KArCY;;AAuCbC,oCAAgC,wCAACC,YAAD,EAAkB;AAClD,iZAOuBA,YAPvB;AASC,KAjDY;;AAmDbC,2BAAuB,+BAACC,OAAD,EAAa;AAChC,8MAIsDA,OAJtD;AAMH,KA1DY;;AA4DbC,kCAA8B,sCAACH,YAAD,EAAkB;AAC5C,mOAI8DA,YAJ9D;AAMH,KAnEY;;AAqEbI,oBAAgB,0BAAM;AAClB;AAIH,KA1EY;;AA4EbC,2BAAuB,+BAACC,MAAD,EAAY;AAC/B,+gCAcmBA,MAdnB;AAgBH;AA7FY,CAAjB;kBA+FeX,O","file":"queries.js","sourcesContent":["const queries =  {\r\n    getAllInvitationsQuery: () => {\r\n    return `\r\n            SELECT JSON_EXTRACT(c.candidate_meta, '$.name') as 'candidateName', \r\n            JSON_EXTRACT(c.candidate_meta, '$.email') as 'candidateEmail', \r\n            JSON_EXTRACT(i.invitation_meta, '$.status') as 'invitationStatus', \r\n            JSON_EXTRACT(i.invitation_meta, '$.invitedOn') as 'invitedOn', \r\n            JSON_EXTRACT(i.invitation_meta, '$.completedOn') as 'completedOn', \r\n            JSON_EXTRACT(r.response_meta, '$.scorePercentage') as 'scorePercentage', \r\n            JSON_EXTRACT(r.response_meta, '$.result') as 'result', \r\n            JSON_EXTRACT(t.test_meta, '$.testName') as 'testName', \r\n            t.id as 'testId', r.id as 'responseId' \r\n            FROM ta_invitations i \r\n            join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n            join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id \r\n            left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n        `;\r\n    },\r\n\r\n    getInvitationsByOrgQuery: (orgId) => {\r\n        return `\r\n                SELECT JSON_EXTRACT(c.candidate_meta, '$.name') as 'candidateName', \r\n                JSON_EXTRACT(c.candidate_meta, '$.email') as 'candidateEmail', \r\n                JSON_EXTRACT(i.invitation_meta, '$.status') as 'invitationStatus', \r\n                JSON_EXTRACT(i.invitation_meta, '$.invitedOn') as 'invitedOn', \r\n                JSON_EXTRACT(i.invitation_meta, '$.completedOn') as 'completedOn', \r\n                JSON_EXTRACT(r.response_meta, '$.scorePercentage') as 'scorePercentage', \r\n                JSON_EXTRACT(r.response_meta, '$.result') as 'result', \r\n                JSON_EXTRACT(t.test_meta, '$.testName') as 'testName', \r\n                t.id as 'testId', r.id as 'responseId' \r\n                FROM ta_invitations i \r\n                join ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n                join ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id\r\n                join ta_users u ON JSON_EXTRACT(i.invitation_meta, '$.createdBy') = u.id \r\n                left join ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n                WHERE JSON_EXTRACT(u.user_meta, '$.orgId') = ${orgId}\r\n            `;\r\n    },\r\n\r\n    getCandidateInfoByInvitationId: (invitationId) => {\r\n    return `\r\n            SELECT i.id AS 'invitationId',\r\n            c.id AS 'candidateId',\r\n            JSON_EXTRACT(c.candidate_meta, '$.name') AS 'candidateName',\r\n            JSON_EXTRACT(c.candidate_meta, '$.email') AS 'candidateEmail'\r\n            FROM ta_invitations i\r\n            JOIN ta_candidates c ON JSON_EXTRACT(i.invitation_meta,'$.candidateId')=c.id\r\n            WHERE i.id = ${invitationId}\r\n        `;\r\n    },\r\n\r\n    getUserByEmailIdQuery: (emailId) => {\r\n        return `\r\n            SELECT u.id as 'id', \r\n            JSON_EXTRACT(u.user_meta, '$') as 'user_meta'\r\n            FROM ta_users u \r\n            WHERE JSON_EXTRACT(u.user_meta, '$.emailId') = '${emailId}'\r\n        `;\r\n    },\r\n\r\n    getMcqResponseByInvitationId: (invitationId) => {\r\n        return `\r\n            SELECT r.id as 'id',\r\n            JSON_EXTRACT(r.response_meta, '$') as 'response_meta'\r\n            FROM ta_mcqresponses r\r\n            WHERE JSON_EXTRACT(r.response_meta, '$.invitationId') = ${invitationId}\r\n        `;\r\n    },\r\n\r\n    getAllDbConfig: () => {\r\n        return `\r\n            SELECT meta_key, meta_value\r\n            FROM ta_config\r\n        `;\r\n    },\r\n\r\n    getCandidatesByTestId: (testId) => {\r\n        return `\r\n            SELECT JSON_EXTRACT(c.candidate_meta, '$.name') as 'candidateName', \r\n            JSON_EXTRACT(c.candidate_meta, '$.email') as 'candidateEmail', \r\n            JSON_EXTRACT(i.invitation_meta, '$.status') as 'invitationStatus', \r\n            JSON_EXTRACT(i.invitation_meta, '$.invitedOn') as 'invitedOn', \r\n            JSON_EXTRACT(i.invitation_meta, '$.completedOn') as 'completedOn', \r\n            JSON_EXTRACT(r.response_meta, '$.scorePercentage') as 'scorePercentage', \r\n            JSON_EXTRACT(r.response_meta, '$.result') as 'result', \r\n            JSON_EXTRACT(t.test_meta, '$.testName') as 'testName', \r\n            t.id as 'testId', r.id as 'responseId' \r\n            FROM ta_invitations i \r\n            JOIN ta_candidates c ON JSON_EXTRACT(i.invitation_meta , '$.candidateId') = c.id \r\n            JOIN ta_tests t ON JSON_EXTRACT(i.invitation_meta , '$.testId') = t.id \r\n            LEFT JOIN ta_mcqresponses r ON JSON_EXTRACT(r.response_meta , '$.invitationId') = i.id\r\n            WHERE t.id = ${testId}\r\n        `;\r\n    }\r\n}\r\nexport default queries;\r\n\r\n\r\n"]}