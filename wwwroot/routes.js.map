{"version":3,"sources":["../src/routes.js"],"names":["api","express","Router","get","auth","McqController","GetAll","post","Add","put","Update","delete","Delete","BulkMcq","CategoryController","SkillController","RmaRequestController","AdminTestController","GetTest","UserController","TestInviteController","SendInvite","StartTest","passport","authenticate","session","scope","req","res","next","console","log","user","status","send","generateToken","sendToken","failureRedirect","redirect"],"mappings":"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","file":"routes.js","sourcesContent":["import express  from 'express';\r\nimport { McqController, CategoryController, SkillController,\r\n        CandidateController, AdminTestController, InviteController,\r\n        UserController } from './Controllers/admin';\r\nimport { TestInviteController } from './Controllers/candidate';\r\n\r\nimport { RmaRequestController } from './Controllers/hitech';\r\n\r\nimport { generateToken, sendToken } from './utils/token.utils';\r\nimport passport from 'passport';\r\nimport auth from './utils/auth';\r\n\r\n\r\nlet api = express.Router();\r\n\r\n/* Admin Routes */\r\n/* mcq endpoints */\r\napi.get('/admin/getAllMcqs', auth, McqController.GetAll);\r\napi.post('/admin/mcq', auth, McqController.Add);\r\napi.put('/admin/mcq', auth, McqController.Update);\r\napi.delete('/admin/mcq', auth, McqController.Delete);\r\napi.post('/admin/bulkMcq', auth, McqController.BulkMcq);\r\n\r\n/* category endpoints */\r\napi.get('/admin/getAllCategories', auth, CategoryController.GetAll);\r\napi.post('/admin/category', auth, CategoryController.Add);\r\napi.put('/admin/category', auth, CategoryController.Update);\r\napi.delete('/admin/category', auth, CategoryController.Delete);\r\n\r\n/* skill endpoints */\r\napi.get('/admin/getAllSkills', auth, SkillController.GetAll);\r\napi.post('/admin/skill', auth, SkillController.Add);\r\napi.delete('/admin/skill', auth, SkillController.Delete);\r\n\r\n/* hitech endpoints */\r\napi.get('/hitech/rmaRequests', RmaRequestController.GetAll);\r\napi.post('/hitech/rmaRequest', RmaRequestController.Add);\r\n// api.put('/admin/candidate', auth, CandidateController.Update);\r\napi.get('/hitech/deleteRmaRequest', RmaRequestController.Delete);\r\n\r\n/* Admin Test endpoints */\r\napi.get('/admin/getAllTests', auth,  AdminTestController.GetAll);\r\napi.get('/admin/getTest', auth, AdminTestController.GetTest);\r\napi.post('/admin/test', auth, AdminTestController.Add);\r\napi.put('/admin/test', auth, AdminTestController.Update);\r\napi.delete('/admin/test', auth, AdminTestController.Delete);\r\n\r\n/* User endpoints */\r\napi.get('/admin/getAllUsers', auth,  UserController.GetAll);\r\napi.post('/admin/user', auth, UserController.Add);\r\napi.put('/admin/user', auth, UserController.Update);\r\napi.delete('/admin/user', auth, UserController.Delete);\r\n\r\n/* Candidate Routes */\r\n/* Test Invite endpoints */\r\napi.post('/candidate/sendInvite', auth, TestInviteController.SendInvite);\r\napi.post('/candidate/startTest', auth, TestInviteController.StartTest);\r\n\r\n\r\napi.get('/admin/auth/google',\r\n    passport.authenticate('google-token', { session: false, \r\n        scope: ['https://www.googleapis.com/auth/plus.login'] }),\r\n    (req, res, next) => {\r\n        console.log('res next');\r\n        req.auth = req.user;\r\n        if(req.user.status === 'not found') {\r\n            return res.status(403).send('User Not Found');\r\n        }\r\n        next();\r\n    }, generateToken, sendToken);\r\n\r\n// GET /auth/google/callback\r\n//   Use passport.authenticate() as route middleware to authenticate the\r\n//   request.  If authentication fails, the user will be redirected back to the\r\n//   login page.  Otherwise, the primary route function function will be called,\r\n//   which, in this example, will redirect the user to the home page.\r\napi.get('/admin/auth/google/callback', \r\n  passport.authenticate('google-token', { failureRedirect: '/login' }),\r\n  function(req, res) {\r\n      console.log('res 3');\r\n    res.redirect('/');\r\n  });\r\n\r\n/*\r\napi.route('/admin/auth/callback', (req, resp) => {\r\n    console.log('admin api callback called');\r\n})\r\napi.get('/admin/auth/google',\r\n        passport.authenticate('google-token'), \r\n        (req, res, next) => {\r\n            console.log('res returned');\r\n            if (!req.user) {\r\n                return res.send(401, 'User Not Authenticated');\r\n            }\r\n            req.auth = {\r\n                id: req.user.id\r\n            };\r\n            next();\r\n        }, \r\n        generateToken, \r\n        sendToken);*/\r\nexport default api;\r\n"]}