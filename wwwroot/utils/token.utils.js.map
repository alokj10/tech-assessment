{"version":3,"sources":["../../src/utils/token.utils.js"],"names":["createToken","auth","console","log","jwt","sign","googleId","emailId","role","name","AuthConfig","myPrivateKey","expiresIn","generateToken","req","res","next","user","token","sendToken","setHeader","status","send","JSON","stringify"],"mappings":";;;;;;;AAEA;;;;AACA;;;;AAHA;;AAKA,IAAMA,cAAc,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC1BC,YAAQC,GAAR,CAAY,gBAAZ;AACA,WAAOC,uBAAIC,IAAJ,CAAS;AACRC,kBAAUL,KAAKK,QADP;AAERC,iBAASN,KAAKM,OAFN;AAGRC,cAAMP,KAAKO,IAHH;AAIRC,cAAMR,KAAKQ;AAJH,KAAT,EAKAC,yBAAWC,YALX;AAMP;AACI;AACIC,mBAAW,KAAK;AADpB,KAPG,CAAP;AAUH,CAZD;;AAcA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACtCd,YAAQC,GAAR,CAAY,kBAAZ,EAAgCW,IAAIG,IAApC;AACAH,QAAII,KAAJ,GAAYlB,YAAYc,IAAIb,IAAhB,CAAZ;AACA,WAAOe,MAAP;AACH,CAJD;;AAMA,IAAMG,YAAY,SAAZA,SAAY,CAACL,GAAD,EAAMC,GAAN,EAAc;AAC5Bb,YAAQC,GAAR,CAAY,eAAZ;AACAY,QAAIK,SAAJ,CAAc,cAAd,EAA8BN,IAAII,KAAlC;AACA,WAAOH,IAAIM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAAKC,SAAL,CAAeV,IAAIG,IAAnB,CAArB,CAAP;AACH,CAJD;;QAOEJ,a,GAAAA,a;QACAM,S,GAAAA,S","file":"token.utils.js","sourcesContent":["// var jwt = require('jsonwebtoken');\r\n\r\nimport jwt from 'jsonwebtoken';\r\nimport { AuthConfig } from '../commons/ServerConfig';\r\n\r\nconst createToken = (auth) => {\r\n    console.log('creating token');\r\n    return jwt.sign({\r\n            googleId: auth.googleId,\r\n            emailId: auth.emailId,\r\n            role: auth.role,\r\n            name: auth.name\r\n        }, AuthConfig.myPrivateKey,\r\n    // }, 'my-secret',\r\n        {\r\n            expiresIn: 60 * 120\r\n        });\r\n};\r\n\r\nconst generateToken = (req, res, next) => {\r\n    console.log('generating token', req.user);\r\n    req.token = createToken(req.auth);\r\n    return next();\r\n};\r\n\r\nconst sendToken = (req, res) => {\r\n    console.log('sending token');\r\n    res.setHeader('x-auth-token', req.token);\r\n    return res.status(200).send(JSON.stringify(req.user));\r\n};\r\n\r\nexport {\r\n  generateToken,\r\n  sendToken\r\n};"]}